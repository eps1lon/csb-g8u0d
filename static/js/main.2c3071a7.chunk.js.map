{"version":3,"sources":["App.js","index.js"],"names":["DynamicAriaActiveDescendantListobx","props","optionIds","unstable_useOpaqueIdentifier","optionCount","length","useReducer","currentActiveIndex","step","activeIndex","changeActiveIndexBy","role","aria-activedescendant","aria-labelledby","onKeyDown","event","key","preventDefault","tabIndex","aria-selected","id","StaticAriaActiveDescendantListobx","activeDescendantId","undefined","App","staticID","dynamicID","className","href","dateTime","SpeechResults","speech","rootElement","document","getElementById","ReactDOM","render"],"mappings":"sPAOA,SAASA,EAAmCC,GAC1C,IAAMC,EAAY,CAChBC,yCACAA,yCACAA,yCACAA,yCACAA,0CAEIC,EAAcF,EAAUG,OAC9B,EAA2CC,sBACzC,SAACC,EAAoBC,GACnB,OAAQD,EAAqBC,EAAOJ,GAAeA,IAErD,GAJF,mBAAOK,EAAP,KAAoBC,EAApB,KAiCA,OACE,qBACEC,KAAK,UACLC,wBAAuBV,EAAUO,GACjCI,kBAAiBZ,EAAM,mBACvBa,UA/BJ,SAAuBC,GACrB,IAAIP,EAAO,KACX,OAAQO,EAAMC,KACZ,IAAK,YACHR,EAAO,EACP,MACF,IAAK,UACHA,GAAQ,EACR,MACF,IAAK,OACHA,GAAQC,EACR,MACF,IAAK,MACHD,EAAOJ,EAAc,EAAIK,EAOhB,OAATD,IACFO,EAAME,iBACNP,EAAoBF,KAUpBU,SAAS,IALX,UAOE,oBAAIP,KAAK,SAASQ,gBAA+B,IAAhBV,EAAmBW,GAAIlB,EAAU,GAAlE,mBAGA,oBAAIS,KAAK,SAASQ,gBAA+B,IAAhBV,EAAmBW,GAAIlB,EAAU,GAAlE,kBAGA,oBAAIS,KAAK,SAASQ,gBAA+B,IAAhBV,EAAmBW,GAAIlB,EAAU,GAAlE,mBAGA,oBAAIS,KAAK,SAASQ,gBAA+B,IAAhBV,EAAmBW,GAAIlB,EAAU,GAAlE,mBAGA,oBAAIS,KAAK,SAASQ,gBAA+B,IAAhBV,EAAmBW,GAAIlB,EAAU,GAAlE,wBAWN,SAASmB,EAAkCpB,GACzC,IAAMqB,EAAqBnB,yCAE3B,EAA2CG,sBACzC,SAACC,EAAoBC,GACnB,OAAQD,EAAqBC,EAHb,OAKlB,GAJF,mBAAOC,EAAP,KAAoBC,EAApB,KAiCA,OACE,qBACEC,KAAK,UACLC,wBAAuBU,EACvBT,kBAAiBZ,EAAM,mBACvBa,UA/BJ,SAAuBC,GACrB,IAAIP,EAAO,KACX,OAAQO,EAAMC,KACZ,IAAK,YACHR,EAAO,EACP,MACF,IAAK,UACHA,GAAQ,EACR,MACF,IAAK,OACHA,GAAQC,EACR,MACF,IAAK,MACHD,EAAOJ,EAAkBK,EAOhB,OAATD,IACFO,EAAME,iBACNP,EAAoBF,KAUpBU,SAAS,IALX,UAOE,oBACEP,KAAK,SACLQ,gBAA+B,IAAhBV,EACfW,GAAoB,IAAhBX,EAAoBa,OAAqBC,EAH/C,mBAOA,oBACEZ,KAAK,SACLQ,gBAA+B,IAAhBV,EACfW,GAAoB,IAAhBX,EAAoBa,OAAqBC,EAH/C,kBAOA,oBACEZ,KAAK,SACLQ,gBAA+B,IAAhBV,EACfW,GAAoB,IAAhBX,EAAoBa,OAAqBC,EAH/C,mBAOA,oBACEZ,KAAK,SACLQ,gBAA+B,IAAhBV,EACfW,GAAoB,IAAhBX,EAAoBa,OAAqBC,EAH/C,mBAOA,oBACEZ,KAAK,SACLQ,gBAA+B,IAAhBV,EACfW,GAAoB,IAAhBX,EAAoBa,OAAqBC,EAH/C,wBAWS,SAASC,IACtB,IAAMC,EAAWtB,yCACXuB,EAAYvB,yCAElB,OACE,sBAAKwB,UAAU,MAAf,UACE,wEACA,iDACA,0DAC2B,0CAD3B,KAC+C,4CAD/C,IACqE,IACnE,uCAFF,SAEuB,sCAFvB,mBAEsD,IACpD,mBAAGC,KAAK,oEAAR,0DAHF,OAQA,oBAAIR,GAAIM,EAAR,2CACA,8BACE,sDADF,mCACkE,IAChE,sCAFF,4BAE0C,0CAF1C,OAIA,6CACc,yDADd,8BAGA,cAAC1B,EAAD,CAAoCa,kBAAiBa,IACrD,oBAAIN,GAAIK,EAAR,0CACA,8BACE,sDADF,sCACqE,IACnE,0CAFF,eAEiC,sCAFjC,SAEsD,sCAFtD,MAEyE,IACvE,0CAHF,kBAKA,cAACJ,EAAD,CAAmCR,kBAAiBa,IACpD,yCACA,kEACoC,IAClC,sBAAMG,SAAS,aAAf,2BAFF,2CAKA,gDACA,6NAGsD,IACpD,mBAAGD,KAAK,mDAAR,iDAJF,OASA,gDACA,kCACE,kDACA,gCACE,+BACE,sCACA,8CAGJ,kCACE,+BACE,sCACA,4CAEF,+BACE,yCACA,6CAIN,cAACE,EAAD,CAAeC,OAAQ,KACvB,+CACA,kCACE,kDACA,gCACE,+BACE,sCACA,8CAGJ,kCACE,+BACE,sCACA,uCAEF,+BACE,wCACA,6CAIN,cAACD,EAAD,CAAeC,OAAQ,KACvB,oDACA,kCACE,kDACA,gCACE,+BACE,sCACA,8CAGJ,kCACE,+BACE,2CACA,uCAEF,+BACE,wCACA,6CAIN,cAACD,EAAD,CAAeC,OAAQ,QAK7B,SAASD,EAAT,GAAyC,IAAD,gBAAfC,cAAe,MAAN,GAAM,EACtC,OACE,kCACE,sDACA,gCACE,+BACE,wCACA,6CAGJ,kCACE,+BACE,2CACA,uCAAKA,EAAO,UAAZ,QAAkB,UAEpB,+BACE,wCACQ,+CAER,uCAAKA,EAAO,UAAZ,QAAkB,UAEpB,+BACE,wCACQ,+CAER,uCAAKA,EAAO,UAAZ,QAAkB,UAEpB,+BACE,wCACQ,6CAER,uCAAKA,EAAO,UAAZ,QAAkB,UAEpB,+BACE,wCACQ,0CAER,uCAAKA,EAAO,UAAZ,QAAkB,UAEpB,+BACE,wCACQ,yCAER,uCAAKA,EAAO,UAAZ,QAAkB,gBC5T5B,IAAMC,EAAcC,SAASC,eAAe,QAC5CC,IAASC,OACP,cAAC,aAAD,UACE,cAACZ,EAAD,MAEFQ,K","file":"static/js/main.2c3071a7.chunk.js","sourcesContent":["import { unstable_useOpaqueIdentifier, useReducer } from \"react\";\nimport \"./styles.css\";\n\n/**\n * Implements the listbox pattern.\n * The `aria-activedescendant` attribute does changes while the ids attributes of the options are static.\n */\nfunction DynamicAriaActiveDescendantListobx(props) {\n  const optionIds = [\n    unstable_useOpaqueIdentifier(),\n    unstable_useOpaqueIdentifier(),\n    unstable_useOpaqueIdentifier(),\n    unstable_useOpaqueIdentifier(),\n    unstable_useOpaqueIdentifier()\n  ];\n  const optionCount = optionIds.length;\n  const [activeIndex, changeActiveIndexBy] = useReducer(\n    (currentActiveIndex, step) => {\n      return (currentActiveIndex + step + optionCount) % optionCount;\n    },\n    0\n  );\n\n  function handleKeyDown(event) {\n    let step = null;\n    switch (event.key) {\n      case \"ArrowDown\":\n        step = +1;\n        break;\n      case \"ArrowUp\":\n        step = -1;\n        break;\n      case \"Home\":\n        step = -activeIndex;\n        break;\n      case \"End\":\n        step = optionCount - 1 - activeIndex;\n        break;\n      default:\n        // nothing\n        break;\n    }\n\n    if (step !== null) {\n      event.preventDefault();\n      changeActiveIndexBy(step);\n    }\n  }\n\n  return (\n    <ul\n      role=\"listbox\"\n      aria-activedescendant={optionIds[activeIndex]}\n      aria-labelledby={props[\"aria-labelledby\"]}\n      onKeyDown={handleKeyDown}\n      tabIndex=\"0\"\n    >\n      <li role=\"option\" aria-selected={activeIndex === 0} id={optionIds[0]}>\n        alpha\n      </li>\n      <li role=\"option\" aria-selected={activeIndex === 1} id={optionIds[1]}>\n        beta\n      </li>\n      <li role=\"option\" aria-selected={activeIndex === 2} id={optionIds[2]}>\n        gamma\n      </li>\n      <li role=\"option\" aria-selected={activeIndex === 3} id={optionIds[3]}>\n        delta\n      </li>\n      <li role=\"option\" aria-selected={activeIndex === 4} id={optionIds[4]}>\n        epsilon\n      </li>\n    </ul>\n  );\n}\n\n/**\n * Implements the listbox pattern.\n * The `aria-activedescendant` attribute does not change while the ids attributes of the options change.\n */\nfunction StaticAriaActiveDescendantListobx(props) {\n  const activeDescendantId = unstable_useOpaqueIdentifier();\n  const optionCount = 5;\n  const [activeIndex, changeActiveIndexBy] = useReducer(\n    (currentActiveIndex, step) => {\n      return (currentActiveIndex + step + optionCount) % optionCount;\n    },\n    0\n  );\n\n  function handleKeyDown(event) {\n    let step = null;\n    switch (event.key) {\n      case \"ArrowDown\":\n        step = +1;\n        break;\n      case \"ArrowUp\":\n        step = -1;\n        break;\n      case \"Home\":\n        step = -activeIndex;\n        break;\n      case \"End\":\n        step = optionCount - 1 - activeIndex;\n        break;\n      default:\n        // nothing\n        break;\n    }\n\n    if (step !== null) {\n      event.preventDefault();\n      changeActiveIndexBy(step);\n    }\n  }\n\n  return (\n    <ul\n      role=\"listbox\"\n      aria-activedescendant={activeDescendantId}\n      aria-labelledby={props[\"aria-labelledby\"]}\n      onKeyDown={handleKeyDown}\n      tabIndex=\"0\"\n    >\n      <li\n        role=\"option\"\n        aria-selected={activeIndex === 0}\n        id={activeIndex === 0 ? activeDescendantId : undefined}\n      >\n        alpha\n      </li>\n      <li\n        role=\"option\"\n        aria-selected={activeIndex === 1}\n        id={activeIndex === 1 ? activeDescendantId : undefined}\n      >\n        beta\n      </li>\n      <li\n        role=\"option\"\n        aria-selected={activeIndex === 2}\n        id={activeIndex === 2 ? activeDescendantId : undefined}\n      >\n        gamma\n      </li>\n      <li\n        role=\"option\"\n        aria-selected={activeIndex === 3}\n        id={activeIndex === 3 ? activeDescendantId : undefined}\n      >\n        delta\n      </li>\n      <li\n        role=\"option\"\n        aria-selected={activeIndex === 4}\n        id={activeIndex === 4 ? activeDescendantId : undefined}\n      >\n        epsilon\n      </li>\n    </ul>\n  );\n}\n\nexport default function App() {\n  const staticID = unstable_useOpaqueIdentifier();\n  const dynamicID = unstable_useOpaqueIdentifier();\n\n  return (\n    <div className=\"App\">\n      <h1>Static vs dynamic aria-acivedescendant</h1>\n      <h2>Implementations</h2>\n      <p>\n        Both listboxes implement <kbd>ArrowUp</kbd>, <kbd>ArrowDown</kbd>,{\" \"}\n        <kbd>Home</kbd>, and <kbd>End</kbd> as described in{\" \"}\n        <a href=\"https://www.w3.org/TR/wai-aria-practices/#listbox_kbd_interaction\">\n          Listbox in WAI-ARIA authoring practices 1.1.\n        </a>\n        .\n      </p>\n      <h3 id={dynamicID}>dynamic aria-activedescendant</h3>\n      <p>\n        <code>aria-activedescant</code> changes to the id of the static{\" \"}\n        <code>id</code> of the currently active <code>option</code>.\n      </p>\n      <p>\n        This is how <code>aria-activedescendant</code> is commonly documented.\n      </p>\n      <DynamicAriaActiveDescendantListobx aria-labelledby={dynamicID} />\n      <h3 id={staticID}>static aria-activedescendant</h3>\n      <p>\n        <code>aria-activedescant</code> is static and the currently active{\" \"}\n        <code>option</code> takes that <code>id</code> i.e. <code>id</code> of{\" \"}\n        <code>option</code> is dynamic.\n      </p>\n      <StaticAriaActiveDescendantListobx aria-labelledby={dynamicID} />\n      <h2>results</h2>\n      <p>\n        All experiments were performed on{\" \"}\n        <time dateTime=\"2021-05-30\">30th May 2021</time> with a production build\n        of this app.\n      </p>\n      <h3>Screen readers</h3>\n      <p>\n        Screen reader + browser combination was chosen based on what screen\n        readers I'm familiar with/have access to (NVDA, JAWS, VoiceOver) and\n        their most popular browser combination according to{\" \"}\n        <a href=\"https://webaim.org/projects/screenreadersurvey8/\">\n          WebAIM Screen Reader User Survey #8\n        </a>\n        .\n      </p>\n      <h3>NVDA + Firefox</h3>\n      <table>\n        <caption>environment</caption>\n        <thead>\n          <tr>\n            <th>name</th>\n            <th>version</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            <td>NVDA</td>\n            <td>2020.04</td>\n          </tr>\n          <tr>\n            <td>Firefox</td>\n            <td>??</td>\n          </tr>\n        </tbody>\n      </table>\n      <SpeechResults speech={[]} />\n      <h3>JAWS + Chrome</h3>\n      <table>\n        <caption>environment</caption>\n        <thead>\n          <tr>\n            <th>name</th>\n            <th>version</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            <td>JAWS</td>\n            <td>??</td>\n          </tr>\n          <tr>\n            <td>Chrome</td>\n            <td>??</td>\n          </tr>\n        </tbody>\n      </table>\n      <SpeechResults speech={[]} />\n      <h3>VoiceOver + Safari</h3>\n      <table>\n        <caption>environment</caption>\n        <thead>\n          <tr>\n            <th>name</th>\n            <th>version</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            <td>VoiceOver</td>\n            <td>??</td>\n          </tr>\n          <tr>\n            <td>Safari</td>\n            <td>??</td>\n          </tr>\n        </tbody>\n      </table>\n      <SpeechResults speech={[]} />\n    </div>\n  );\n}\n\nfunction SpeechResults({ speech = [] }) {\n  return (\n    <table>\n      <caption>recorded speech</caption>\n      <thead>\n        <tr>\n          <th>Action</th>\n          <th>Speech</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr>\n          <td>Press tab</td>\n          <td>{speech[0] ?? \"??\"}</td>\n        </tr>\n        <tr>\n          <td>\n            Press <kbd>ArrowDown</kbd>\n          </td>\n          <td>{speech[1] ?? \"??\"}</td>\n        </tr>\n        <tr>\n          <td>\n            Press <kbd>ArrowDown</kbd>\n          </td>\n          <td>{speech[2] ?? \"??\"}</td>\n        </tr>\n        <tr>\n          <td>\n            Press <kbd>ArrowUp</kbd>\n          </td>\n          <td>{speech[3] ?? \"??\"}</td>\n        </tr>\n        <tr>\n          <td>\n            Press <kbd>Home</kbd>\n          </td>\n          <td>{speech[4] ?? \"??\"}</td>\n        </tr>\n        <tr>\n          <td>\n            Press <kbd>End</kbd>\n          </td>\n          <td>{speech[5] ?? \"??\"}</td>\n        </tr>\n      </tbody>\n    </table>\n  );\n}\n","import { StrictMode } from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./App\";\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(\n  <StrictMode>\n    <App />\n  </StrictMode>,\n  rootElement\n);\n"],"sourceRoot":""}